var gdjs;(function(h){class n{constructor(t,o,e,r){this._wasRendered=!1;this._textureWidth=0;this._textureHeight=0;this._object=t;const i=o.getGame().getImageManager().getPIXITexture(e),s=r?PIXI.TilingSprite:PIXI.Sprite;this._spritesContainer=new PIXI.Container,this._wrapperContainer=new PIXI.Container,this._centerSprite=new s(new PIXI.Texture(i.baseTexture)),this._borderSprites=[new s(new PIXI.Texture(i.baseTexture)),new PIXI.Sprite(new PIXI.Texture(i.baseTexture)),new s(new PIXI.Texture(i.baseTexture)),new PIXI.Sprite(new PIXI.Texture(i.baseTexture)),new s(new PIXI.Texture(i.baseTexture)),new PIXI.Sprite(new PIXI.Texture(i.baseTexture)),new s(new PIXI.Texture(i.baseTexture)),new PIXI.Sprite(new PIXI.Texture(i.baseTexture))],this.setTexture(e,o),this._spritesContainer.removeChildren(),this._spritesContainer.addChild(this._centerSprite);for(let d=0;d<this._borderSprites.length;++d)this._spritesContainer.addChild(this._borderSprites[d]);this._wrapperContainer.addChild(this._spritesContainer),o.getLayer("").getRenderer().addRendererObject(this._wrapperContainer,t.getZOrder())}getRendererObject(){return this._wrapperContainer}ensureUpToDate(){this._spritesContainer.visible&&this._wasRendered&&this._centerSprite.texture.baseTexture.scaleMode!==PIXI.SCALE_MODES.NEAREST&&(this._spritesContainer.cacheAsBitmap=!0),this._wasRendered=!0}updateOpacity(){this._wrapperContainer.alpha=this._object.opacity/255,this._spritesContainer.cacheAsBitmap=!1}updateAngle(){this._wrapperContainer.rotation=h.toRad(this._object.angle)}updatePosition(){this._wrapperContainer.position.x=this._object.x+this._object._width/2,this._wrapperContainer.position.y=this._object.y+this._object._height/2}_updateLocalPositions(){const t=this._object,o=this._borderSprites[3].width,e=this._borderSprites[3].height,r=this._borderSprites[7].width,i=this._borderSprites[7].height;this._centerSprite.position.x=o,this._centerSprite.position.y=e,this._borderSprites[0].position.x=t._width-r,this._borderSprites[0].position.y=e,this._borderSprites[1].position.x=t._width-r,this._borderSprites[1].position.y=0,this._borderSprites[2].position.x=o,this._borderSprites[2].position.y=0,this._borderSprites[3].position.x=0,this._borderSprites[3].position.y=0,this._borderSprites[4].position.x=0,this._borderSprites[4].position.y=e,this._borderSprites[5].position.x=0,this._borderSprites[5].position.y=t._height-i,this._borderSprites[6].position.x=o,this._borderSprites[6].position.y=t._height-i,this._borderSprites[7].position.x=t._width-r,this._borderSprites[7].position.y=t._height-i}_updateSpritesAndTexturesSize(){const t=this._object;this._centerSprite.width=Math.max(t._width-t._rBorder-t._lBorder,0),this._centerSprite.height=Math.max(t._height-t._tBorder-t._bBorder,0);let o=t._lBorder,e=t._rBorder;this._centerSprite.width===0&&t._lBorder+t._rBorder>0&&(o=t._width*t._lBorder/(t._lBorder+t._rBorder),e=t._width-o);let r=t._tBorder,i=t._bBorder;this._centerSprite.height===0&&t._tBorder+t._bBorder>0&&(r=t._height*t._tBorder/(t._tBorder+t._bBorder),i=t._height-r),this._borderSprites[0].width=e,this._borderSprites[0].height=Math.max(t._height-r-i,0),this._borderSprites[2].height=r,this._borderSprites[2].width=Math.max(t._width-e-o,0),this._borderSprites[4].width=o,this._borderSprites[4].height=Math.max(t._height-r-i,0),this._borderSprites[6].height=i,this._borderSprites[6].width=Math.max(t._width-e-o,0),this._borderSprites[1].width=e,this._borderSprites[1].height=r,this._borderSprites[3].width=o,this._borderSprites[3].height=r,this._borderSprites[5].width=o,this._borderSprites[5].height=i,this._borderSprites[7].width=e,this._borderSprites[7].height=i,this._wasRendered=!0,this._spritesContainer.cacheAsBitmap=!1}setTexture(t,o){const e=this._object,r=o.getGame().getImageManager().getPIXITexture(t).baseTexture;this._textureWidth=r.width,this._textureHeight=r.height;function i(s){return s.width<0&&(s.width=0),s.height<0&&(s.height=0),s.x<0&&(s.x=0),s.y<0&&(s.y=0),s.x>r.width&&(s.x=r.width),s.y>r.height&&(s.y=r.height),s.x+s.width>r.width&&(s.width=r.width-s.x),s.y+s.height>r.height&&(s.height=r.height-s.y),s}this._centerSprite.texture.destroy(!1),this._centerSprite.texture=new PIXI.Texture(r,i(new PIXI.Rectangle(e._lBorder,e._tBorder,r.width-e._lBorder-e._rBorder,r.height-e._tBorder-e._bBorder))),this._borderSprites[0].texture.destroy(!1),this._borderSprites[0].texture=new PIXI.Texture(r,i(new PIXI.Rectangle(r.width-e._rBorder,e._tBorder,e._rBorder,r.height-e._tBorder-e._bBorder))),this._borderSprites[2].texture.destroy(!1),this._borderSprites[2].texture=new PIXI.Texture(r,i(new PIXI.Rectangle(e._lBorder,0,r.width-e._lBorder-e._rBorder,e._tBorder))),this._borderSprites[4].texture.destroy(!1),this._borderSprites[4].texture=new PIXI.Texture(r,i(new PIXI.Rectangle(0,e._tBorder,e._lBorder,r.height-e._tBorder-e._bBorder))),this._borderSprites[6].texture.destroy(!1),this._borderSprites[6].texture=new PIXI.Texture(r,i(new PIXI.Rectangle(e._lBorder,r.height-e._bBorder,r.width-e._lBorder-e._rBorder,e._bBorder))),this._borderSprites[1].texture.destroy(!1),this._borderSprites[1].texture=new PIXI.Texture(r,i(new PIXI.Rectangle(r.width-e._rBorder,0,e._rBorder,e._tBorder))),this._borderSprites[3].texture.destroy(!1),this._borderSprites[3].texture=new PIXI.Texture(r,i(new PIXI.Rectangle(0,0,e._lBorder,e._tBorder))),this._borderSprites[5].texture.destroy(!1),this._borderSprites[5].texture=new PIXI.Texture(r,i(new PIXI.Rectangle(0,r.height-e._bBorder,e._lBorder,e._bBorder))),this._borderSprites[7].texture.destroy(!1),this._borderSprites[7].texture=new PIXI.Texture(r,i(new PIXI.Rectangle(r.width-e._rBorder,r.height-e._bBorder,e._rBorder,e._bBorder))),this._updateSpritesAndTexturesSize(),this._updateLocalPositions(),this.updatePosition(),this._wrapperContainer.pivot.x=this._object._width/2,this._wrapperContainer.pivot.y=this._object._height/2}updateWidth(){this._wrapperContainer.pivot.x=this._object._width/2,this._updateSpritesAndTexturesSize(),this._updateLocalPositions(),this.updatePosition()}updateHeight(){this._wrapperContainer.pivot.y=this._object._height/2,this._updateSpritesAndTexturesSize(),this._updateLocalPositions(),this.updatePosition()}setColor(t){const o=t.split(";");if(!(o.length<3)){this._centerSprite.tint=h.rgbToHexNumber(parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10));for(let e=0;e<this._borderSprites.length;e++)this._borderSprites[e].tint=h.rgbToHexNumber(parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10));this._spritesContainer.cacheAsBitmap=!1}}getColor(){const t=new PIXI.Color(this._centerSprite.tint).toRgbArray();return Math.floor(t[0]*255)+";"+Math.floor(t[1]*255)+";"+Math.floor(t[2]*255)}getTextureWidth(){return this._textureWidth}getTextureHeight(){return this._textureHeight}destroy(){for(const t of this._borderSprites)t.destroy({texture:!0});this._centerSprite.destroy({texture:!0}),this._wrapperContainer.destroy(!1),this._spritesContainer.destroy(!1)}}h.PanelSpriteRuntimeObjectRenderer=n})(gdjs||(gdjs={}));
//# sourceMappingURL=panelspriteruntimeobject-pixi-renderer.js.map
